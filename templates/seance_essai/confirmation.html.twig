{# templates/seance_essai/confirmation.html.twig #}
{% extends 'base.html.twig' %}
{% block title %}Merci — Séance d’essai{% endblock %}

{% block stylesheets %}
  {{ parent() }}
  <style>
    .hero-thanks {
      min-height: 50vh; display:grid; place-items:center; text-align:center; color:#fff; padding:3rem 1.25rem;
      background: linear-gradient(rgba(0,0,0,.5), rgba(0,0,0,.5)), url('/images/hero-thanks-good.png') center/cover no-repeat;
    }
    .hero-thanks h1 { font-weight:800; letter-spacing:.02em; font-size: clamp(2rem, 1.2rem + 2vw, 3rem); }
    .info-list i { color: var(--bs-success); }
  </style>
{% endblock %}

{% block body %}
  <header class="hero-thanks">
    <div class="container">
      <h1>Merci, votre demande a bien été envoyée ✅</h1>
      <p class="lead">Nous revenons vers vous rapidement pour confirmer votre réservation.</p>
      <div class="mt-3">
        <a href="{{ path('app_home') }}" class="btn btn-outline-light">← Retour à l’accueil</a>
      </div>
    </div>
  </header>

  <section class="py-5">
    <div class="container">
      <div class="row g-4">
        <div class="col-lg-7">
          <div class="card h-100">
            <div class="card-body">
              <h2 class="h4">Récapitulatif (si transmis)</h2>
              <ul class="list-unstyled info-list mb-0">
                <li class="mb-2"><i class="bi bi-check-circle-fill me-2"></i><strong>Nom :</strong> {{ last_name ?? '—' }}</li>
                <li class="mb-2"><i class="bi bi-check-circle-fill me-2"></i><strong>Prénom :</strong> {{ first_name ?? '—' }}</li>
                <li class="mb-2"><i class="bi bi-check-circle-fill me-2"></i><strong>Email :</strong> {{ email ?? '—' }}</li>
                <li class="mb-2"><i class="bi bi-check-circle-fill me-2"></i><strong>Téléphone :</strong> {{ phone ?? '—' }}</li>
                <li class="mb-2"><i class="bi bi-check-circle-fill me-2"></i><strong>Objectif :</strong> {{ goal ?? '—' }}</li>

                {# Cours souhaité + date/heure (tout provient de la query envoyée dans le redirect) #}
                {% set labelJour = slot_day is defined and slot_day ? (day_labels[slot_day]|default(slot_day)) : null %}
                {% set horaire   = (slot_start is defined and slot_end is defined and slot_start and slot_end)
                                   ? (slot_start ~ ' – ' ~ slot_end) : null %}
                <li class="mb-2"><i class="bi bi-check-circle-fill me-2"></i><strong>Cours souhaité :</strong>
                  {% if slot_title or trial_date or horaire %}
                    {{ slot_title ?? '—' }}
                    {% if trial_date or horaire or labelJour %}
                      <span class="text-muted">
                        · {{ trial_date ?? 'date à confirmer' }}
                        {% if horaire %} · {{ horaire }}{% endif %}
                      </span>
                    {% endif %}
                    {% else %}
                    — 
                  {% endif %}
                </li>
              </ul>
            </div>
          </div>
        </div>
        <div class="col-lg-5">
          <div class="card h-100">
            <div class="card-body">
              <h2 class="h4">Et maintenant ?</h2>
              <ul class="list-unstyled small mb-0">
                <li class="mb-2"><i class="bi bi-clock me-2"></i>Un coach vous contactera pour confirmer votre séance d'essai.</li>
                <li class="mb-2"><i class="bi bi-geo-alt me-2"></i>Venez 20 min en avance pour l’accueil et la visite.</li>
                <li class="mb-2"><i class="bi bi-bag-check me-2"></i>Prévoyez : tenue adaptée, chaussures, serviette, bouteille d’eau.</li>
              </ul>
            </div>
            <div class="card-footer bg-transparent text-end">
              <a href="{{ path('seance_essai') ?? '#' }}" class="btn btn-primary">Réserver une autre séance</a>
            </div>
          </div>
        </div>
      </div>

      <div class="text-center mt-5">
        <a href="{{ path('app_home') }}" class="btn btn-outline-secondary">← Retour à l’accueil</a>
      </div>
    </div>
  </section>
{% endblock %}
